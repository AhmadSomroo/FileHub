{% extends "base.html" %}
{% block content %}
<div class="login-container">
  <div class="login-card" style="max-width: 550px;">
    <div class="text-center mb-4">
      <i class="bi bi-shield-lock-fill" style="font-size: 4rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></i>
    </div>
    <h3>{% if is_first_login %}⚠️ Password Change Required{% else %}Change Your Password{% endif %}</h3>
    <p class="text-center text-muted mb-4">
      {% if is_first_login %}
        <strong>You must change your temporary password before accessing the system.</strong>
      {% else %}
        Create a strong password to secure your account
      {% endif %}
    </p>
    
    <form method="post">
      {{ form.hidden_tag() }}
      
      <div class="mb-3">
        <label class="form-label">
          <i class="bi bi-key-fill me-2"></i>{{ form.password.label.text }}
        </label>
        {{ form.password(class="form-control", placeholder="Enter new password") }}
        {% if form.password.errors %}
          {% for error in form.password.errors %}
            <div class="text-danger small mt-1">
              <i class="bi bi-exclamation-circle me-1"></i>{{ error }}
            </div>
          {% endfor %}
        {% endif %}
      </div>
      
      <div class="mb-4">
        <label class="form-label">
          <i class="bi bi-key-fill me-2"></i>{{ form.confirm.label.text }}
        </label>
        {{ form.confirm(class="form-control", placeholder="Confirm new password") }}
        {% if form.confirm.errors %}
          {% for error in form.confirm.errors %}
            <div class="text-danger small mt-1">
              <i class="bi bi-exclamation-circle me-1"></i>{{ error }}
            </div>
          {% endfor %}
        {% endif %}
      </div>
      
      <div class="alert alert-info mb-4">
        <strong><i class="bi bi-info-circle me-2"></i>Password Requirements:</strong>
        <ul class="mb-0 mt-2 small">
          <li>At least 8 characters long</li>
          <li>At least one uppercase letter (A-Z)</li>
          <li>At least one lowercase letter (a-z)</li>
          <li>At least one digit (0-9)</li>
          <li>At least one special character (!@#$%^&*)</li>
        </ul>
      </div>
      
      <div class="d-grid">
        {{ form.submit(class="btn btn-primary btn-lg") }}
      </div>
    </form>
  </div>
</div>
{% endblock %}
